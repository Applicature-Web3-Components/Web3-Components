<table [dataSource]="dataSource"
       mat-table
       class="wcl-table">
  <ng-container *ngFor="let column of columns; let last=last"
                [matColumnDef]="column.columnDef">
    <th *matHeaderCellDef
        [style.width.%]="100 / (columns.length - 1)"
        mat-header-cell>{{ column.headerCellDef }}</th>

    <td mat-cell *matCellDef="let element">
      <ng-container *ngIf="column.templateRef else defaultView">
        <ng-container [ngTemplateOutlet]="column.templateRef"
                      [ngTemplateOutletContext]="{ element: element }"></ng-container>
      </ng-container>

      <ng-template #defaultView>{{ element[column.columnDef] }}</ng-template>
    </td>
  </ng-container>

  <ng-container matColumnDef="footerRow">
    <td *matCellDef="let element"
        [attr.colspan]="columns.length"
        (click)="onLoadMoreClick()"
        mat-cell>
      <div><span>Load More</span><span class="wcl-icon-chevron-down"></span></div>
    </td>
  </ng-container>

  <tr *matHeaderRowDef="displayedColumns"
      mat-header-row
      class="wcl-table__header"></tr>

  <tr *matRowDef="let row; columns: displayedColumns;"
      mat-row
      class="wcl-table__row"></tr>

  <tr *matRowDef="let row; columns: ['footerRow']; when: isLastItem"
      mat-row
      class="wcl-table__footer"></tr>
</table>
