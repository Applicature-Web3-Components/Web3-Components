<div class="connect-wallet">
  <ng-container *ngIf="isConnected else connectWallet">
    <ng-container [ngSwitch]="appearance">
      <ng-container *ngSwitchCase="'button'">
        <ng-container *ngTemplateOutlet="networkOptionsRef"></ng-container>

        <div class="connect-wallet__container">
          <auc-button *ngIf="(hasPendingTx || hasFailedTx) else acBallanceWithAddress"
                      (onClick)="onAccountButtonClick()"
                      [disabled]="disabled"
                      [label]="txCount + (hasPendingTx ? ' pending':  ' failing')"
                      [pending]="hasPendingTx"
                      [rightIcon]="!hasPendingTx && hasFailedTx ? 'wcl-icon-fail' : ''"
                      [color]="hasFailedTx ? COLORS.RED : COLORS.WHITE">
          </auc-button>

          <ng-template #acBallanceWithAddress>
            <auc-account-balance
              [appearance]="BALANCE_APPEARANCE.TRANSLUCENT"
              [showAddress]="true"
              [addressConfig]="{
                                  showIdenticon: true,
                                  color: COLORS.WHITE
                                }"
              (onAddressClick)="onAccountButtonClick()"
            >
            </auc-account-balance>
          </ng-template>
        </div>
      </ng-container>

      <ng-container *ngSwitchCase="'icon'">
        <auc-account-balance [appearance]="BALANCE_APPEARANCE.TRANSPARENT"
                             class="connect-wallet__account-balance">
        </auc-account-balance>

        <auc-transactions-history *ngIf="showTransactions"
                                  class="connect-wallet__transactions">
        </auc-transactions-history>

        <ng-container *ngTemplateOutlet="networkOptionsRef"></ng-container>

        <div class="connect-wallet__container">
          <auc-account-button [account]="account"
                              [options]="accountOptions"
                              [accountDropdownConfig]="accountDropdownConfig"
          >
          </auc-account-button>
        </div>
      </ng-container>

      <ng-container *ngSwitchDefault>
        <auc-button (onClick)="onDisconnectWalletClick()"
                    [disabled]="disabled"
                    [color]="COLORS.RED"
                    label="Disconnect Wallet">
        </auc-button>
      </ng-container>
    </ng-container>
  </ng-container>


  <ng-template #connectWallet>
    <auc-button (onClick)="onConnectWalletClick()"
                [disabled]="disabled"
                leftIcon="wcl-icon-wallet"
                label="Connect Wallet">
    </auc-button>
  </ng-template>
</div>

<ng-template #networkOptionsRef>
  <auc-network-dropdown *ngIf="showNetworkOptions"
                        [networkDropdownConfig]="networkDropdownConfig"
                        class="connect-wallet__networks">
  </auc-network-dropdown>
</ng-template>
