<div class="wcl-account">
  <div class="wcl-account__header">
    <h1>{{ data.header }}</h1>

    <span (click)="onCloseClick()"
          class="wcl-icon-close"></span>
  </div>

  <div class="wcl-account__info info">
    <div class="info__header">
      <span>Connected with Metamask</span>
      <button (click)="onChangeClick()"
              matRipple
              class="info__header__change">Change</button>
      <button (click)="onDisconnectClick()"
              matRipple
              class="info__header__disconnect">Disconnect</button>
    </div>
    <div #infoMain class="info__main">
      <span>{{ accountAddress | shortAddress }}</span>
    </div>
    <div class="info__footer">
      <span [cdkCopyToClipboard]="accountAddress"
            class="info__footer__item"><i class="wcl-icon-copy"></i><span>Copy Address</span></span>
      <a class="info__footer__item" [href]="etherscanAddress$ | async"
         target="_blank"><i class="wcl-icon-external-link"></i><span>View on Explorer</span></a>
    </div>
  </div>

  <ng-container *ngIf="(transactions$ | async) as transactions">
    <div *ngIf="transactions?.length > 0 else emptyView"
         class="wcl-account__list">
      <div class="wcl-account__list__header">
        <h1>Recent transactions</h1>
        <span (click)="onClearTransactionsClick()">(clear all)</span>
      </div>
      <div *ngFor="let transaction of transactions"
           class="wcl-account__list__item">
        <a [href]="transaction.etherscanUrl"
           [class.fail]="transaction.status==='fail'"
           target="_blank"
           rel="noopener noreferrer">
          {{ transaction.name }}
        </a>
        <ng-container [ngSwitch]="transaction.status">
          <span *ngSwitchCase="'fail'" class="wcl-icon-fail"></span>

          <span *ngSwitchCase="'success'" class="wcl-icon-check"></span>

          <mat-progress-spinner *ngSwitchCase="'pending'"
                                mode="indeterminate"
                                diameter="18">
          </mat-progress-spinner>
        </ng-container>
      </div>
    </div>
  </ng-container>

  <ng-template #emptyView>
    <div class="wcl-account__empty">Your transactions will appear here...</div>
  </ng-template>
</div>
