<div class="transfer">
  <div class="transfer__header">
    <h1>{{ data.header }}</h1>

    <span (click)="onCloseClick()"
          class="wcl-icon-close"></span>
  </div>

  <applicature-input [max]="data.max"
                     [suffix]="data.symbol"
                     [hint]="'Current allowance: ' + currentAllowance + ' ' + data.symbol"
                     [adaptive]="true"
                     [decimal]="true"
                     [formControl]="amountControl"
                     label="Amount"
                     placeholder="Enter amount"
                     class="transfer__input">
  </applicature-input>

  <div class="transfer__progress">
    <h3 class="transfer__steps">Step {{ currentStep }} of 2</h3>

    <ng-container *ngIf="currentStep === 1 else secondView">
      <p class="transfer__info">Your allowance must be first increased.</p>
      <p class="transfer__info">Please click Approve to increase your allowance.</p>
    </ng-container>

    <ng-template #secondView>
      <p class="transfer__info">Now you can transfer funds.</p>
      <p class="transfer__info">Please click Transfer.</p>
    </ng-template>

    <mat-progress-bar mode="determinate" [value]="50 * currentStep"></mat-progress-bar>
  </div>

  <ng-container *ngIf="currentStep === 1 else transferButton">
    <applicature-button [label]="data.approveButton"
                        [adaptive]="true"
                        [height]="48"
                        (onClick)="onApproveClick()"></applicature-button>
  </ng-container>

  <ng-template #transferButton>
    <applicature-button [label]="data.confirmButton"
                        [adaptive]="true"
                        [height]="48"
                        (onClick)="onConfirmClick()"></applicature-button>
  </ng-template>
</div>
